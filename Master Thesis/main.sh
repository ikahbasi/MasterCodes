############################
#     by IMAN KAHBASI      #
# master students in IIEES #
############################

echo "###########    running obspy-scan.sh    ###########"
date +"Start obspy-scan: %F %H:%M:%S" >> $logtime
bash obspy-scan.sh ../obspy-scan
date +"End   obspy-scan: %F %H:%M:%S" >> $logtime; echo >> $logtime

:'
params_list=(
#output                      lowcut  highcut
#change highcut fix lowcut=0.1
"../filter_test/run0.1-8       0.1      8.0"
"../filter_test/run0.1-10      0.1     10.0"
"../filter_test/run0.1-12      0.1     12.0"
)

for params in "${params_list[@]}"
do
    params=($params)
    output=${params[0]}
    lowcut=${params[1]}
    highcut=${params[2]}

    mkdir -p ./$output/log
    logtime="./$output/log/run_time.log"
    echo out: $output   low: $lowcut   high: $highcut
###############################################################################
    ###########################################################################
    echo; echo "###########    running script 1-make_tribes.py    ###########"
    date +"Start make-tribes: %F %H:%M:%S" >> $logtime
    ###########################################################################
    (
    python3 1-make_tribes.py --inp_out $output --lowcut $lowcut --highcut $highcut
    ) | tee ./$output/log/1-tribe-terminal.log
    ###########################################################################
    date +"End   make-tribes: %F %H:%M:%S" >> $logtime; echo >> $logtime
###############################################################################


###############################################################################
    ###########################################################################
    echo; echo "###########    running script 2-detect.py    ###########"
    date +"Strat detect: %F %H:%M:%S" >> $logtime
    ###########################################################################
    (
    python3 2-detect.py --inp_out $output
    ) | tee ./$output/log/2-detect-terminal.log
    ###########################################################################
    date +"End   detect: %F %H:%M:%S" >> $logtime; echo >> $logtime
###############################################################################


###############################################################################
    ###########################################################################
    echo; echo "###########    running script 3-lag-calc.py    ###########"
    date +"Strat lag-calc: %F %H:%M:%S" >> $logtime
    ###########################################################################
    (
    python3 3-0-lag_calc.py --inp_out $output
    )| tee ./$output/log/3-lag-terminal.log
    ###########################################################################
    date +"End   lag-calc: %F %H:%M:%S" >> $logtime; echo >> $logtime
###############################################################################


###############################################################################
    ###########################################################################
    echo; echo "###########    running script 3-1-get-cat.py    ###########"
    date +"Strat get-cat: %F %H:%M:%S" >> $logtime
    ###########################################################################
    (
    python3 3-1-get-cat.py --inp_out $output
    )| tee ./$output/log/3-1-get-cat-terminal.log
    ###########################################################################
    date +"End   get-cat: %F %H:%M:%S" >> $logtime; echo >> $logtime
###############################################################################


###############################################################################
    ###########################################################################
    echo; echo "###########    running script 4-cumulative.py    ###########"
    date +"Start cumulative: %F %H:%M:%S" >> $logtime
    ###########################################################################
    (
    python3 4-cumulative.py --inp_out $output
    ) | tee ./$output/log/4-cumulative-terminal.log
    ###########################################################################
    date +"End   cumulative: %F %H:%M:%S" >> $logtime; echo >> $logtime
###############################################################################


###############################################################################
    ###########################################################################
    echo; echo "########### running script 5-relative_magnitude.py ###########"
    date +"Start relative_magnitude: %F %H:%M:%S" >> $logtime
    ###########################################################################
    (
    python3 5-relative_magnitude.py  --inp_out $output
    )| tee ./$output/log/5-relative_magnitude-terminal.log
    ###########################################################################
    date +"End   relative_magnitude: %F %H:%M:%S" >> $logtime; echo >> $logtime
###############################################################################


###############################################################################
    ###########################################################################
    echo; echo "########### running script 6-Gutenberg_Richter.py  ###########"
    date +"Start Gutenberg_Richter.py: %F %H:%M:%S" >> $logtime
    ###########################################################################
    (
    python3 6-Gutenberg_Richter.py  --inp_out $output
    )| tee ./$output/log/6-Gutenberg_Richter-terminal.log
    ###########################################################################
    date +"End   Gutenberg_Richter.py: %F %H:%M:%S" >> $logtime; echo >> $logtime
###############################################################################
done
'




path="../filter_test"
mkdir -p $path/QC-log
logtime="$path/QC-log/run_time.log"
:'
###############################################################################
###########################################################################
echo; echo "########### running script 7-locations.sh  ###########"
date +"Start locations.sh: %F %H:%M:%S" >> $logtime
###########################################################################
bash 7-locations.sh $path | tee ./$path/QC-log/7-location-terminal.log
###########################################################################
date +"End   locations.sh: %F %H:%M:%S" >> $logtime; echo >> $logtime
###############################################################################
'

###############################################################################
###########################################################################
echo; echo "########### running script 7-clean-locations.py  ###########"
date +"Start clean-locations.py: %F %H:%M:%S" >> $logtime
###########################################################################
python3 7-clean-locations.py --inp_out $path | tee ./$path/QC-log/7-clean-locations.py-terminal.log
###########################################################################
date +"End   clean-locations.py: %F %H:%M:%S" >> $logtime; echo >> $logtime
###############################################################################


###############################################################################
###########################################################################
echo; echo "########### running script 8-QC.py  ###########"
date +"Start 8-QC.py: %F %H:%M:%S" >> $logtime
###########################################################################
python3 8-QC.py --inp_out $path | tee ./$path/QC-log/8-QC-terminal.log
###########################################################################
date +"End   8-QC.py: %F %H:%M:%S" >> $logtime; echo >> $logtime
###############################################################################


###############################################################################
###########################################################################
echo; echo "########### running script 9-QCplot.py  ###########"
date +"Start 9-QCplot.py: %F %H:%M:%S" >> $logtime
###########################################################################
python3 9-QCplot.py --inp_out $path | tee ./$path/QC-log/9-QCplot-terminal.log
###########################################################################
date +"End   9-QCplot.py: %F %H:%M:%S" >> $logtime; echo >> $logtime
###############################################################################
